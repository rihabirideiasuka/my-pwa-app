<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>体力データ送信</title>
</head>
<body>
  <button onclick="sendToSpreadsheet()">Googleスプレッドシートに送信</button>

  <script>
    function getData() {
      const raw = localStorage.getItem('tairyoku_data');
      return raw ? JSON.parse(raw) : [];
    }

    async function sendToSpreadsheet() {
      const data = getData();
      if (data.length === 0) return alert('データがありません');

      const endpoint = 'https://script.google.com/macros/s/AKfycby6b7ZcldKZbQDgIhjfj_hwGN8TTWiERGKuLygGTCqhLEP3AJkmqHNM4x2D8QACIHDR/exec'; // あなたのURLに置き換えて！

      try {
        const res = await fetch(endpoint, {
          method: 'POST',
          body: JSON.stringify(data),
          headers: {
            'Content-Type': 'application/json'
          }
        });

        if (res.ok) {
          alert('Googleスプレッドシートに送信しました！');
          localStorage.removeItem('tairyoku_data');
        } else {
          alert('送信に失敗しました（ステータスコード: ' + res.status + '）');
        }
      } catch (error) {
        console.error('送信エラー:', error);
        alert('エラーが発生しました。コンソールを確認してください。');
      }
    }
  </script>
</body>
</html>
